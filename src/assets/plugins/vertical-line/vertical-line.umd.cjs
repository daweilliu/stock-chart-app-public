(function(o,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(o=typeof globalThis<"u"?globalThis:o||self,i(o.VerticalLine={}))})(this,function(o){"use strict";var x=Object.defineProperty;var w=(o,i,r)=>i in o?x(o,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[i]=r;var e=(o,i,r)=>w(o,typeof i!="symbol"?i+"":i,r);function i(n){return Math.floor(n*.5)}function r(n,t,s=1,h){const l=Math.round(t*n),c=Math.round(s*t),f=i(c);return{position:l-f,length:c}}class a{constructor(t,s){e(this,"_x",null);e(this,"_options");this._x=t,this._options=s}draw(t){t.useBitmapCoordinateSpace(s=>{if(this._x===null)return;const h=s.context,l=r(this._x,s.horizontalPixelRatio,this._options.width);h.fillStyle=this._options.color,h.fillRect(l.position,0,l.length,s.bitmapSize.height)})}}class u{constructor(t,s){e(this,"_source");e(this,"_x",null);e(this,"_options");this._source=t,this._options=s}update(){const t=this._source._chart.timeScale();this._x=t.timeToCoordinate(this._source._time)}renderer(){return new a(this._x,this._options)}}class _{constructor(t,s){e(this,"_source");e(this,"_x",null);e(this,"_options");this._source=t,this._options=s}update(){const t=this._source._chart.timeScale();this._x=t.timeToCoordinate(this._source._time)}visible(){return this._options.showLabel}tickVisible(){return this._options.showLabel}coordinate(){return this._x??0}text(){return this._options.labelText}textColor(){return this._options.labelTextColor}backColor(){return this._options.labelBackgroundColor}}const p={color:"green",labelText:"",width:3,labelBackgroundColor:"green",labelTextColor:"white",showLabel:!1};class d{constructor(t,s,h,l){e(this,"_chart");e(this,"_series");e(this,"_time");e(this,"_paneViews");e(this,"_timeAxisViews");const c={...p,...l};this._chart=t,this._series=s,this._time=h,this._paneViews=[new u(this,c)],this._timeAxisViews=[new _(this,c)]}updateAllViews(){this._paneViews.forEach(t=>t.update()),this._timeAxisViews.forEach(t=>t.update())}timeAxisViews(){return this._timeAxisViews}paneViews(){return this._paneViews}}o.VertLine=d,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});

(function(n,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("lightweight-charts")):typeof define=="function"&&define.amd?define(["exports","lightweight-charts"],s):(n=typeof globalThis<"u"?globalThis:n||self,s(n.BrushableAreaSeries={},n.LightweightCharts))})(this,function(n,s){"use strict";var w=Object.defineProperty;var P=(n,s,d)=>s in n?w(n,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):n[s]=d;var b=(n,s,d)=>P(n,typeof s!="symbol"?s+"":s,d);const d={...s.customSeriesDefaultOptions,lineColor:"rgb(40,98,255)",topColor:"rgba(40,98,255, 0.4)",bottomColor:"rgba(40,98,255, 0)",lineWidth:2,basePrice:0,brushRanges:[]};class v{constructor(){b(this,"_data",null);b(this,"_options",null)}draw(i,l){i.useBitmapCoordinateSpace(h=>this._drawImpl(h,l))}update(i,l){this._data=i,this._options=l}_drawImpl(i,l){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const h=this._options,c=this._data.bars.map(e=>({x:Math.round(e.x*i.horizontalPixelRatio),y:l(e.originalData.value)*i.verticalPixelRatio})),a=i.context,p=i.bitmapSize.height,x=e=>{if(typeof h.brushRanges=="string")return h;const t=h.brushRanges.findIndex(r=>e>=r.range.from&&e<r.range.to);return t>=0?h.brushRanges[t].style:h},g=new Array(this._data.visibleRange.to),f=c[this._data.visibleRange.from];let y=f.y;for(let e=this._data.visibleRange.from+1;e<this._data.visibleRange.to;e++){g[e]=x(e);const t=c[e];t.y<y&&(y=t.y)}const _=new Map;function S(e,t){const r=e+t;if(_.has(r))return _.get(r);const u=a.createLinearGradient(0,p,0,y);return u.addColorStop(0,e),u.addColorStop(1,t),_.set(r,u),u}let o=[f.x,f.y];for(let e=this._data.visibleRange.from+1;e<this._data.visibleRange.to;e++){const t=c[e],r=g[e];a.beginPath(),a.moveTo(o[0],o[1]),a.lineTo(t.x,t.y),a.lineTo(t.x,p),a.lineTo(o[0],p),a.closePath(),a.fillStyle=S(r.bottomColor,r.topColor),a.fill(),o=[t.x,t.y]}o=[f.x,f.y];for(let e=this._data.visibleRange.from+1;e<this._data.visibleRange.to;e++){const t=c[e],r=g[e],u=e>0?g[e-1]!==r:!1,C=e===this._data.visibleRange.to-1?!0:g[e+1]!==r;u&&(a.beginPath(),a.moveTo(o[0],o[1])),a.lineTo(t.x,t.y),C&&(a.strokeStyle=r.lineColor,a.lineWidth=r.lineWidth*i.verticalPixelRatio,a.stroke()),o=[t.x,t.y]}}}class m{constructor(){b(this,"_renderer");this._renderer=new v}priceValueBuilder(i){return[i.value]}isWhitespace(i){return i.value===void 0}renderer(){return this._renderer}update(i,l){this._renderer.update(i,l)}defaultOptions(){return d}}n.BrushableAreaSeries=m,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
